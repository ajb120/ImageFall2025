<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Igloo Hideaway</title>
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <style>body { margin: 0; }</style>
  <script>
    AFRAME.registerComponent('snow', {
      schema: { count: { type: 'int', default: 300 } },

      init: function () {
      this.particles = [];
        for (let i = 0; i < this.data.count; i++) {
          const p = document.createElement('a-sphere');
            p.setAttribute('radius', 0.03 + Math.random() * 0.04);
            p.setAttribute('color', '#fff');
            p.setAttribute('material', 'transparent:true; opacity:0.9');
            p.setAttribute('position', `${(Math.random()-0.5)*24} ${Math.random()*12+2} ${(Math.random()-0.5)*24-6}`);
            this.el.appendChild(p);
            this.particles.push({
          el: p,
          vx: (Math.random()-0.5) * 0.02,
          vy: -(0.02 + Math.random()*0.06)
          });
        }
      },

  tick: function (time, delta) {
    const dt = delta / 16.666; // normalize to 60fps
    this.particles.forEach(p => {
      const pos = p.el.object3D.position;
      pos.x += p.vx * dt;
      pos.y += p.vy * dt;
      pos.z += Math.sin((time + Math.random()*1000)/2000) * 0.0005 * dt;
      if (pos.y < 0.1) pos.y = Math.random()*10 + 6;
    });
  }
});
</script>

  </head>

  <body>
   <a-scene  fog="type: exponential; color: #ffffff; density: 0.002">
      
      <!-- Assets -->
      <a-assets>
        <img id="sky" src="assets/snowimage.jpg" alt="">
        <img id="snow" src="assets/snowtexture2.jpg" alt="">
        <a-asset-item id="igloo" src="assets/Igloo.obj"></a-asset-item>
        <a-asset-item id="bear" src="assets/polarbear.obj"></a-asset-item>
        <a-asset-item id="mobile" src="assets/snowmobile.obj"></a-asset-item>
      </a-assets>
      
      <!-- Sky -->
      <a-sky src="#sky"></a-sky>

      <!-- Igloo Model -->
      <a-obj-model src="#igloo" position="5 0.5 -20" scale="1 1 1" color="#ffffff" rotation="0 200 0"></a-obj-model>

      <!-- Bear -->
      <a-obj-model src="#bear" position="5 0.5 -15" scale="0.02 0.02 0.02" rotation="270 0 270" ></a-obj-model>

      <!-- Snow Mobile -->
      <a-obj-model src="#mobile" position="-20 0.5 -25" scale="0.01 0.01 0.01" rotation="-90 160 0" color="#82eefd"></a-obj-model>

      <!-- Snow -->
      <a-entity snow="count: 700"></a-entity>

      <!-- Plane -->
      <a-plane rotation="270 0 0" position="0 -12 0"width="10000" height="10000" src="#snow" repeat="100 100"></a-plane>

      <!-- Camera -->
      <a-entity camera position="0 5 0" look-controls></a-entity>

    </a-scene>
  </body>
</html>